What this means (important)

This error is thrown by Supabase Auth, not Render.

It means the frontend loaded, but Supabase could not validate or consume the recovery token.

This happens when ONE of the following is wrong (very common):

ğŸš¨ Root causes (ordered by likelihood)
1ï¸âƒ£ Supabase client is NOT initialized correctly on /reset-password

On the reset page, Supabase must be initialized with the public ANON key, not the service key, and must match the project that sent the email.

âœ… Required
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)


âŒ Common mistakes:

Using the wrong Supabase project

Missing env vars on Render

Using SUPABASE_SERVICE_ROLE_KEY in frontend

Env vars not exposed (NEXT_PUBLIC_ missing)

ğŸ‘‰ If Supabase cannot initialize â†’ â€œUnable to connect to authentication serviceâ€

2ï¸âƒ£ The recovery token is NOT being consumed correctly

Supabase recovery links MUST be handled from the URL hash.

âœ… Correct handling (simple + safe)
useEffect(() => {
  supabase.auth.getSessionFromUrl({ storeSession: true })
}, [])


âŒ Wrong:

Manually parsing token but never setting session

Expecting query params instead of hash

Calling updateUser before session exists

If the session is not created â†’ Supabase says Invalid Link

3ï¸âƒ£ Password update is attempted BEFORE session exists

This will always fail.

âŒ Wrong
supabase.auth.updateUser({ password })


(before session)

âœ… Correct
const { data } = await supabase.auth.getSession()

if (!data.session) {
  // show error
  return
}

await supabase.auth.updateUser({ password })

4ï¸âƒ£ Site URL / Redirect URLs misconfigured in Supabase

In Supabase Dashboard â†’ Authentication â†’ URL Configuration:

âœ… Must include:
Site URL:
https://www.touchconnectpro.com

âœ… Redirect URLs must include:
https://www.touchconnectpro.com/reset-password


âŒ Missing this causes:

Invalid link

5ï¸âƒ£ Mixed environment (prod vs dev)

Very common mistake:

Reset email sent from prod Supabase

Frontend pointing to dev Supabase

Or Render env vars still pointing to old project

ğŸ‘‰ Tokens are project-specific
Wrong project = Invalid Link

Quick debug steps for the dev (2 minutes)

On /reset-password, log:

console.log('hash', window.location.hash)
console.log('supabase url', process.env.NEXT_PUBLIC_SUPABASE_URL)


Then test:

const { data, error } = await supabase.auth.getSessionFromUrl()
console.log(data, error)


If error exists â†’ config problem, not email.

One-line diagnosis for the dev

The page now loads correctly, but Supabase cannot validate the recovery token because the auth client is misconfigured or the session is not being created from the URL hash.

Final checklist (must ALL be true)

âœ” Correct Supabase project
âœ” Correct public anon key on Render
âœ” /reset-password route exists
âœ” getSessionFromUrl() is called
âœ” Session exists before password update
âœ” Redirect URL registered in Supabase