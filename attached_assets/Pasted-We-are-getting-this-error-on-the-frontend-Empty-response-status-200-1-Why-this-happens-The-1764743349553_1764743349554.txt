We are getting this error on the frontend:

‚úó Empty response (status: 200)

1. Why this happens

The backend route /api/submit returns empty output, meaning:

The server sends HTTP status 200

But no response body is actually sent, or

An internal error happens before sending JSON

Or the server crashes before sending a JSON object

When the frontend runs:

const data = await response.json();


But response.body is empty, the browser throws:

Failed to execute 'json' on 'Response': Unexpected end of JSON input

‚úÖ 2. Root Causes to Check and Fix
A. The backend route is inserting into a table that does NOT exist

The route uses:

client.from("ideas")


But in Supabase the tables created are:

coach
investissement
mentors
messages
profiles
projects
reviews
subscriptions


There is NO table called ideas.

‚û°Ô∏è Supabase returns an error
‚û°Ô∏è Our backend might catch it incorrectly
‚û°Ô∏è Or might crash before sending .json() response

B. The server code might be crashing before returning JSON

Add logging inside the route to see what's happening.

C. Missing or misconfigured environment variables

The createClient() function requires:

SUPABASE_URL

SUPABASE_SERVICE_ROLE_KEY

If SUPABASE_SERVICE_ROLE_KEY is missing, the call:

client.from("ideas").insert(...)


fails silently if not handled correctly.

Make sure Render has in Environment variables:

SUPABASE_URL = https://xxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY = <Service_role_secret>


Yes: Service_role Secret from Supabase is correct.

‚úÖ 3. What Needs to Be Updated in the Code
Option 1 ‚Äî Rename the table in backend

If the correct table is projects, replace:

client.from("ideas")


with:

client.from("projects")


Or the correct table your logic intends to use.

Option 2 ‚Äî Create the missing table

If the intended table is really ideas, create:

create table ideas (
  id uuid primary key default uuid_generate_v4(),
  status text,
  entrepreneur_email text,
  entrepreneur_name text,
  data jsonb,
  business_plan jsonb,
  user_id uuid
);

‚úÖ 4. Make user_id nullable (fix submitted ideas without account)
alter table projects
alter column user_id drop not null;


Or in the Supabase UI:
Table ‚Üí column user_id ‚Üí Allow Nulls: ON

‚úÖ 5. Add Defensive Logging (recommended)
console.log("Incoming submit payload:", req.body);
console.log("Supabase URL:", process.env.SUPABASE_URL ? "Loaded" : "MISSING");
console.log("Has service key:", !!process.env.SUPABASE_SERVICE_ROLE_KEY);


Inside the insert:

console.log("Insert response:", { data, error });

‚úÖ 6. How to confirm it's fixed
On Render Logs:

You should see:

Incoming submit payload: { ... }
Insert response: { data: [...], error: null }

On frontend:

The response should be:

{ "success": true, "id": "generated-id-xxxx" }


No more JSON errors.

üìå Final Summary for Developer

Your tasks:

Fix the table name mismatch (ideas table does not exist)

Ensure environment variables are correct on Render

Make user_id nullable if needed

Add logging to the backend route

REDEPLOY the server after adding env variables