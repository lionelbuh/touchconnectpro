Password reset still failing â€“ explanation for developer (URLs already updated)

Supabase URL configuration is now correct.
The remaining issue is purely frontend auth flow.

What is happening now

User clicks Supabase recovery link

Browser opens:

/reset-password#access_token=...&type=recovery


Render serves index.html correctly

React app loads

But the recovery token is never consumed

Supabase rejects the link and returns:
â€œInvalid Link â€“ Unable to connect to authentication serviceâ€

This happens because Supabase requires an explicit auth handshake on page load.

ğŸš¨ Required code that is currently missing

On the /reset-password page, we must call Supabase immediately to consume the token.

âœ… REQUIRED (this is non-optional)
useEffect(() => {
  supabase.auth.getSessionFromUrl({
    storeSession: true
  })
}, [])


If this function is not called:

Supabase never validates the token

No session is created

Any password update fails

Supabase shows Invalid Link

Common mistake causing this issue

âŒ Page shows password form first
âŒ updateUser() called directly
âŒ Token manually parsed but session never set

Supabase does not accept manual handling unless session is created.

Correct reset-password flow (must follow exactly)

Page loads

getSessionFromUrl() runs immediately

Supabase creates a temporary session

Verify session exists

Show password form

Call updateUser({ password })

Minimal correct implementation (reference)
useEffect(() => {
  supabase.auth.getSessionFromUrl({ storeSession: true })
}, [])

const handleReset = async () => {
  const { data } = await supabase.auth.getSession()

  if (!data.session) {
    throw new Error("No session â€“ invalid or expired link")
  }

  await supabase.auth.updateUser({ password })
}

Environment sanity check (important)

Confirm on Render:

NEXT_PUBLIC_SUPABASE_URL â†’ correct project

NEXT_PUBLIC_SUPABASE_ANON_KEY â†’ public key only

No service-role key in frontend

No dev/prod Supabase mismatch

One-line diagnosis

The reset-password route loads correctly, but the Supabase recovery token is never consumed because getSessionFromUrl() is missing or not executed on page load.

Final note

This is not:
âŒ Render
âŒ Email
âŒ URL config
âŒ Supabase outage

This is one missing auth call on the reset-password page.